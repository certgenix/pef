I want you to clean up my entire Firebase auth + Firestore structure and fix the navigation flow.

My app currently works, but it is not smooth:
- After sign up, it briefly shows dashboard before redirecting.
- After login, the user stays on login page until I manually refresh.
- Firestore created too many collections: employerProfiles, userProfiles, userRoles, etc.
  I DO NOT want these extra collections.

I want a clean, simple, fast system.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ðŸ”¥ PART 1 â€” WHAT TO FIX IN AUTH FLOW
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. FIX: After login â†’ automatically redirect to /dashboard  
   - The login page must listen to AuthContext.
   - If currentUser exists, automatically navigate("/dashboard").

2. FIX: After signup â†’ create Firestore user document THEN navigate.
   - Wait for setDoc() to finish.
   - Do NOT render dashboard until user is fully created.

3. FIX: Remove flashing Dashboard on first load.
   - AuthContext must have:
       loading: true | false
   - Only render children when loading = false.

4. FIX: ProtectedRoute must:
   - If loading â†’ show a Loading screen
   - If user authenticated â†’ render
   - If not authenticated â†’ redirect to /login

5. FIX: Avoid double rendering and race conditions.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ðŸ”¥ PART 2 â€” SIMPLIFY FIRESTORE STRUCTURE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

DELETE these unnecessary collections:
- employerProfiles
- userRoles
- userProfiles

ONLY KEEP THESE:

1. users/    (main profile + roles + roleData)
2. opportunities/   (jobs, business listings, investments)
3. settings/ (optional for admin)

Update all code to use this clean structure.

User document MUST look like:

users/{uid}:
  name
  email
  country
  roles: {
    professional: boolean,
    jobSeeker: boolean,
    employer: boolean,
    businessOwner: boolean,
    investor: boolean
  }
  professionalData: {}
  jobSeekerData: {}
  employerData: {}
  businessOwnerData: {}
  investorData: {}

DO NOT create extra collections like:
- employerProfiles
- jobSeekerProfiles
- userRoles
- userProfiles

Everything must stay inside users collection.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ðŸ”¥ PART 3 â€” UPDATE ALL READ/WRITE LOGIC
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Every dashboard must read its data from:

  users/{uid}

Example:
  const docRef = doc(db, "users", currentUser.uid);

Every update must be:

  updateDoc(docRef, {
    professionalData: {...}
  });

Do NOT write to any other collection.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ðŸ”¥ PART 4 â€” WHAT YOU MUST OUTPUT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

I want updated versions of:

1. AuthContext.jsx  
   âœ“ Proper loading state  
   âœ“ Proper redirect behavior  
   âœ“ No flicker or double rendering  

2. ProtectedRoute.jsx  
   âœ“ Waits for auth  
   âœ“ Redirects cleanly  

3. LoginPage.jsx  
   âœ“ Auto-redirect when logged in  

4. RegisterPage.jsx  
   âœ“ Creates Firestore doc before redirecting  
   âœ“ Smooth transition  

5. Clean Firestore structure instructions  
   âœ“ Remove extra collections  
   âœ“ Only use the minimal structure  

Make sure the final system is:
â€¢ fast  
â€¢ smooth  
â€¢ no UI flicker  
â€¢ no partial dashboard rendering  
â€¢ clean Firestore schema  
â€¢ no unnecessary nested collections  
