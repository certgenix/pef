I need you to fix my Dashboard.jsx because it crashes when useUserRoles() is still loading
and returns undefined or null. This causes activeRoles.length to fail and shows an
â€œError Loading Accountâ€ screen even when the user is correctly registered.

Here is what I want you to do:

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ”¥ PROBLEM TO FIX
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. activeRoles can be undefined while Firestore is loading.
2. activeRoles.length throws an error and the dashboard breaks.
3. The redirect logic runs too early (before Firestore returns the roles).
4. The filter() and includes() calls break when activeRoles is not ready.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ”¥ FIX REQUIREMENTS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Add a safe fallback:

    const safeRoles = Array.isArray(activeRoles) ? activeRoles : [];

â€¢ Replace ALL conditions that use activeRoles.length with:
    
    if (!isLoading && safeRoles.length === 0)
    if (!isLoading && safeRoles.length === 1)

â€¢ Replace all uses of activeRoles.includes with safeRoles.includes.

â€¢ Update the redirect logic:

    useEffect(() => {
      if (isLoading) return;
      if (safeRoles.length === 1) {
        const dashboard = roleDashboards.find(d => d.role === safeRoles[0]);
        if (dashboard) setLocation(dashboard.path);
      }
    }, [safeRoles, isLoading]);

â€¢ Make sure the dashboard does NOT show any error page when Firestore is still loading.

â€¢ Ensure the dashboard always waits for Firestore data before making decisions.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ”¥ OUTPUT FORMAT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Please output the FULL corrected Dashboard.jsx file with:

âœ“ safeRoles fallback added  
âœ“ all role checks updated  
âœ“ redirect logic fixed  
âœ“ defensive loading logic  
âœ“ no accidental redirects  
âœ“ no more â€œError Loading Accountâ€ due to undefined roles

DO NOT change UI design.  
Only fix role loading, redirect logic, and undefined crashes.
